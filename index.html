<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>nyt</title>
    <script src="js/nytressource.js" type="text/javascript"></script>
    <script src="resource/countries.js" type="text/javascript"></script>
    <script src="resource/oceans.js" type="text/javascript"></script>
    <script src="resource/countrieInfo.js" type="text/javascript"></script>
    <script src="resource/gratulices.js" type="text/javascript"></script>
    <script src="resource/land.js" type="text/javascript"></script>
    <script src="resource/geographicLines.js" type="text/javascript"></script>
    <script src="resource/regions.js" type="text/javascript"></script>
    <script src="resource/boundaries.js" type="text/javascript"></script>
    <script src="resource/populatedPlaces.js" type="text/javascript"></script>
    <script src="resource/urbanAreas.js" type="text/javascript"></script>
    <script src="resource/lakes.js" type="text/javascript"></script>
    <script src="resource/rivers.js" type="text/javascript"></script>
    <script src="resource/tinycountries.js" type="text/javascript"></script>
    <script src="js/map.js"></script>
    <script type="text/javascript">

        function init()
        {
            //var nytRessource   = new NYTRessource().getAllCountriesJSON();


            var countries  = new NYTRessource().getCountriesData();
            var map        = new Map('canvasContainer',{width:window.innerWidth,height:window.innerHeight});
            var oceans     = new MapLayer('oceans',OCEANS,{fillStyle:'rgb(250,250,250)'});
            var gratulices = new MapLayer('gratulices',GRATULICES,{strokeStyle:'rgb(240,240,240)'});
            var land       = new MapLayer('land',LAND,{fillStyle:'#fff',shadowColor:'rgba(0,0,0,0.25)',
              shadowBlur : 2,
              shadowOffsetX : 0,
              shadowOffsetY : 0});



            var lakes      = new MapLayer('lakes',LAKES,{fillStyle:'rgb(220,220,220)'});
            var rivers     = new MapLayer('rivers',RIVERS,{strokeStyle:'rgb(220,220,220)'});

            var regions    = new MapLayer('regions',REGIONS,{strokeStyle:'rgb(150,150,150)'});
            var countries  = new MapLayer('countries',COUNTRIES,{fillStyle:'rgb(200,200,200)'});

            countries.excludeElement(countries.getElementsWithPropertyAndKey('NAME','Antarctica'));


            var tinycountries  = new MapLayer('tinycountries',TINY_COUNTRIES,{fillStyle:'rgb(0,0,0)'});
            var boundaries  = new MapLayer('boundaries',BOUNDARIES,{strokeStyle:'rgb(255,255,255)'});
            var popplaces   = new MapLayer('popplaces',POPULATED_PLACES,{fillStyle:'rgba(255,50,50,0.2)',strokeStyle:'rgb(255,50,50)'});
            var geoLines   = new MapLayer('geoLines',GEOGRAPHIC_LINES,{strokeStyle:'rgb(0,0,0)'});
            var urbanAreas = new MapLayer('urbanareas',URBAN_AREAS,{fillStyle:'rgb(160,160,160)'});

            var countryCenters = new DataLayer('countriescenter',COUNTRIE_INFO_GEOJSON,{fillStyle:'rgba(255,50,50,1)',strokeStyle:'rgb(255,50,50)'});

            map.addLayer(oceans);
            map.addLayer(gratulices);
            //map.addLayer(geoLines);
           // map.addLayer(land);

            map.addLayer(countries);
           // map.addLayer(urbanAreas);
            map.addLayer(lakes);
            map.addLayer(rivers);
            map.addLayer(boundaries);
            map.addLayer(countryCenters);

            map.render();


           // map.addLayer(regions);
            //map.addLayer(popplaces);
            //map.addLayer(tinycountries);


/*
            var element = countries.elements[10];

            countries.setElementStyle(element,{fillStyle:'rgb(200,0,0)'});

            console.log(element.properties.NAME);
            */

           // map.render();


            //var cInfo = COUNTRY_INFO;

            /*
            "code":"AD",
                    "name":"Andorra",
                    "isoNumeric":"020",
                    "isoAlpha3":"AND",
                    "fipsCode":"AN",
                    "continentName":"Europe",
                    "capital":"Andorra la Vella",
                    "areaInSqKm":468,
                    "population":84000,
                    "currencyCode":"EUR",
                    "languages":["ca"],
                    "geoNameId":"3041565",
                    "direction":{
                        "west":1.4071867141112762,
                        "east":42.65604389629997,
                        "north":1.7865427778319827,
                        "south":42.42849259876837
                    },
                    "continent":"EU"
             */

            /*
            var GEOGRAPHIC_LINES={
            "type": "FeatureCollection",
            "features": [
            { "type": "Feature", "properties": {}, 'geometry':{}}
            ]};
            */
            /*
            var out = {'type:':'FeatureCollection','features':[]};

            var i = -1;
            var coords;
            var ccode;

            while(++i < cInfo.length -1 )
            {
                ccode  = cInfo[i].code.toLowerCase();
                coords = COUNTRIES_LATLON.hasOwnProperty(ccode) ? COUNTRIES_LATLON[ccode] : [];

                out.features.push({'type':'Feature',
                                   'properties':
                                   {
                                       'code'         :cInfo[i].code,
                                       'isoNumeric:'  :cInfo[i].isoNumeric,
                                       'isoAlpha3'    :cInfo[i].isoAlpha3,
                                       'fipsCode'     :cInfo[i].fipsCode,
                                       'continentName':cInfo[i].continentName,
                                       'capital'      :cInfo[i].capital,
                                       'areaInSqKm'   :cInfo[i].areaInSqKm,
                                       'population'   :cInfo[i].population,
                                       'currencyCode' :cInfo[i].currencyCode,
                                       'languages'    :cInfo[i].languages,
                                       'geoNameId'    :cInfo[i].geoNameId,
                                       'direction'    :cInfo[i].direction,
                                       'continent'    :cInfo[i].continent
                                    },
                                    'geometry':
                                    {
                                        'type': 'Point',
                                        'coordinates': coords
                                    }
                                   });
            }

            //console.log(cInfo.length + ' ' + Object.keys(COUNTRIES_LATLON).length);

            i = -1;

            while(++i < out.features.length)
            {
                if(out.features[i].geometry.coordinates.length == 0)out.features.splice(i,1);
            }



            console.log(JSON.stringify(out));

            /*
            AX
            BL
            BQ
            CW
            GG
            IM
            JE
            MF
            PN
            SS
            SX
            TL
            XK
            */






        }

    </script>
    <style type="text/css">
        * {
                   margin: 0;
                   padding: 0;
               }
        #controls
        {

        }
    </style>
</head>
<body onload="init();">
<div id='canvasContainer'></div>
<div id='controls'></div>
</body>
</html>